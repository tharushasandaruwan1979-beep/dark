<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaming Dark Tharu</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:'Orbitron',sans-serif;background:#0b0b0f;color:#fff}
.hero{height:100vh;background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.9)),url('banner.jpg') center/cover}
h2{color:#ff2e2e}
section{padding:50px 20px;max-width:900px;margin:auto}

.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}
.card{background:#14141c;border:1px solid #ff2e2e;border-radius:12px;padding:15px;text-align:center}
.card img,.card iframe{width:100%;border-radius:10px}

button{
  margin-top:10px;
  width:100%;
  background:none;
  border:2px solid #ff2e2e;
  color:#fff;
  padding:10px;
  cursor:pointer;
  transition:.3s
}
button:hover{background:#ff2e2e;box-shadow:0 0 15px #ff2e2e}

input,textarea{
  width:100%;
  margin:5px 0;
  padding:8px;
  background:#14141c;
  color:#fff;
  border:2px solid #ff2e2e;
  border-radius:6px
}

#adminPanel{display:none;border:2px dashed #ff2e2e;padding:20px;margin-bottom:40px}
</style>
</head>

<body>

<div class="hero"></div>

<section>

<h2>Admin Upload Panel</h2>
<div id="adminPanel">
  <input type="file" id="file" accept="image/png,image/jpeg">
  <button onclick="upload()">‚¨ÜÔ∏è Upload Photo</button>

  <input type="text" id="videoURL" placeholder="YouTube Video URL">
  <button onclick="addVideo()">üé¨ Add Video</button>
</div>

<h2>Gallery</h2>
<div class="gallery" id="gallery"></div>

<h2>Visitor Comments</h2>
<input type="text" id="visitorName" placeholder="‡∂î‡∂∂‡∂ú‡∑ö ‡∂±‡∂∏">
<textarea id="visitorComment" placeholder="‡∂î‡∂∂‡∂ú‡∑ö comment"></textarea>
<button onclick="addComment()">üí¨ Post Comment</button>
<div id="comments"></div>

</section>

<script>
// ADMIN MODE
const params=new URLSearchParams(location.search);
const isAdmin=params.get("admin")==="DARKTHARU";
if(isAdmin) document.getElementById("adminPanel").style.display="block";

// ================= GALLERY =================
let galleryData = JSON.parse(localStorage.getItem("gallery") || "[]");

function loadGallery(){
  const g=document.getElementById("gallery");
  g.innerHTML="";
  galleryData.forEach((item,i)=>{
    const d=document.createElement("div");
    d.className="card";

    if(item.type==="photo"){
      d.innerHTML=`<img src="${item.src}">`;
    }else{
      d.innerHTML=`<iframe src="https://www.youtube.com/embed/${item.src}" allowfullscreen></iframe>`;
    }

    d.innerHTML+=`
      <button onclick="likeGallery(${i})">‚ù§Ô∏è ${item.likes}</button>
      ${isAdmin?`<button onclick="deleteItem(${i})">üóëÔ∏è Delete</button>`:""}
    `;
    g.appendChild(d);
  });
}
loadGallery();

// UPLOAD PHOTO
function upload(){
  const file=document.getElementById("file").files[0];
  if(!file) return alert("Image ‡∂ë‡∂ö‡∂ö‡∑ä select ‡∂ö‡∂ª‡∂±‡∑ä‡∂±");

  if(!["image/png","image/jpeg"].includes(file.type))
    return alert("PNG / JPG / JPEG only");

  const r=new FileReader();
  r.onload=e=>{
    galleryData.push({
      type:"photo",
      src:e.target.result,
      likes:0
    });
    localStorage.setItem("gallery",JSON.stringify(galleryData));
    loadGallery();
  };
  r.readAsDataURL(file);
}

// ADD VIDEO
function addVideo(){
  const url=videoURL.value.trim();
  if(!url) return alert("URL ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂Ø‡∑è‡∂±‡∑ä‡∂±");

  const id=url.includes("v=")
    ? url.split("v=")[1].split("&")[0]
    : url.split("youtu.be/")[1];

  galleryData.push({type:"video",src:id,likes:0});
  localStorage.setItem("gallery",JSON.stringify(galleryData));
  videoURL.value="";
  loadGallery();
}

// LIKE GALLERY (PERSISTENT)
function likeGallery(i){
  galleryData[i].likes++;
  localStorage.setItem("gallery",JSON.stringify(galleryData));
  loadGallery();
}

// DELETE
function deleteItem(i){
  galleryData.splice(i,1);
  localStorage.setItem("gallery",JSON.stringify(galleryData));
  loadGallery();
}

// ================= COMMENTS =================
function addComment(){
  const n=visitorName.value.trim();
  const c=visitorComment.value.trim();
  if(!n||!c) return alert("Name & Comment ‡∂Ø‡∑è‡∂±‡∑ä‡∂±");

  let comments=JSON.parse(localStorage.getItem("comments")||"[]");
  comments.unshift({name:n,text:c,likes:0});
  localStorage.setItem("comments",JSON.stringify(comments));

  visitorName.value="";
  visitorComment.value="";
  loadComments();
}

function loadComments(){
  const div=document.getElementById("comments");
  div.innerHTML="";
  let comments=JSON.parse(localStorage.getItem("comments")||"[]");

  comments.forEach((c,i)=>{
    const el=document.createElement("div");
    el.className="card";
    el.innerHTML=`<strong>${c.name}</strong><br>${c.text}<br>‚ù§Ô∏è ${c.likes}`;

    const btn=document.createElement("button");
    btn.innerText="üëç Like";
    btn.onclick=()=>{
      c.likes++;
      localStorage.setItem("comments",JSON.stringify(comments));
      loadComments();
    };

    el.appendChild(btn);
    div.appendChild(el);
  });
}
loadComments();
</script>

</body>
</html>
